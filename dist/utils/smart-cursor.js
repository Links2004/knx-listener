"use strict";
function check(i) {
    if (i < 0) {
        throw Error('Index should not be zero or negative number');
    }
}
class SmartCursor {
    constructor(i = 0) {
        this.cursor = i;
        this.memorizedCursor = i;
    }
    jump(i) {
        check(i);
        this.cursor = i;
        this.memorizedCursor = i;
        return this;
    }
    skip(_field, nextPos = 1) {
        this.next(nextPos);
        return this;
    }
    diff(sync = true) {
        const memorized = this.cursor - this.memorizedCursor;
        if (sync) {
            this.jump(this.cursor);
        }
        return memorized;
    }
    memorize() {
        this.memorizedCursor = this.cursor;
        return this;
    }
    next(nextPos = 1) {
        check(nextPos);
        const clone = this.cursor;
        this.cursor += nextPos;
        return clone;
    }
    get memorized() {
        return this.memorizedCursor;
    }
    get cur() {
        return this.cursor;
    }
}
exports.SmartCursor = SmartCursor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21hcnQtY3Vyc29yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL3NtYXJ0LWN1cnNvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsZUFBZSxDQUFTO0lBQ3RCLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ1YsTUFBTSxLQUFLLENBQUMsNkNBQTZDLENBQUMsQ0FBQztJQUM3RCxDQUFDO0FBQ0gsQ0FBQztBQUtEO0lBR0UsWUFBWSxJQUFZLENBQUM7UUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUNNLElBQUksQ0FBQyxDQUFTO1FBQ25CLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNULElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQ00sSUFBSSxDQUFDLE1BQWUsRUFBRSxPQUFPLEdBQUcsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25CLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQ00sSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJO1FBQ3JCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUNyRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNELE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUNNLFFBQVE7UUFDYixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFDTSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUM7UUFDckIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2YsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQztRQUN2QixNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUNELElBQUksU0FBUztRQUNYLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQzlCLENBQUM7SUFDRCxJQUFJLEdBQUc7UUFDTCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0NBQ0Y7QUF4Q0Qsa0NBd0NDIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY2hlY2soaTogbnVtYmVyKSB7XG4gIGlmIChpIDwgMCkge1xuICAgIHRocm93IEVycm9yKCdJbmRleCBzaG91bGQgbm90IGJlIHplcm8gb3IgbmVnYXRpdmUgbnVtYmVyJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyBoZWxwZXIgYWN0cyBhcyBpdGVycmF0b3IgdG8gYWNjZXNzIGJ1ZmZlclxuICovXG5leHBvcnQgY2xhc3MgU21hcnRDdXJzb3Ige1xuICBwcml2YXRlIGN1cnNvcjogbnVtYmVyO1xuICBwcml2YXRlIG1lbW9yaXplZEN1cnNvcjogbnVtYmVyO1xuICBjb25zdHJ1Y3RvcihpOiBudW1iZXIgPSAwKSB7XG4gICAgdGhpcy5jdXJzb3IgPSBpO1xuICAgIHRoaXMubWVtb3JpemVkQ3Vyc29yID0gaTtcbiAgfVxuICBwdWJsaWMganVtcChpOiBudW1iZXIpIHtcbiAgICBjaGVjayhpKTtcbiAgICB0aGlzLmN1cnNvciA9IGk7XG4gICAgdGhpcy5tZW1vcml6ZWRDdXJzb3IgPSBpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHB1YmxpYyBza2lwKF9maWVsZD86IHN0cmluZywgbmV4dFBvcyA9IDEpIHtcbiAgICB0aGlzLm5leHQobmV4dFBvcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcHVibGljIGRpZmYoc3luYyA9IHRydWUpIHtcbiAgICBjb25zdCBtZW1vcml6ZWQgPSB0aGlzLmN1cnNvciAtIHRoaXMubWVtb3JpemVkQ3Vyc29yO1xuICAgIGlmIChzeW5jKSB7XG4gICAgICB0aGlzLmp1bXAodGhpcy5jdXJzb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbWVtb3JpemVkO1xuICB9XG4gIHB1YmxpYyBtZW1vcml6ZSgpIHtcbiAgICB0aGlzLm1lbW9yaXplZEN1cnNvciA9IHRoaXMuY3Vyc29yO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHB1YmxpYyBuZXh0KG5leHRQb3MgPSAxKSB7XG4gICAgY2hlY2sobmV4dFBvcyk7XG4gICAgY29uc3QgY2xvbmUgPSB0aGlzLmN1cnNvcjtcbiAgICB0aGlzLmN1cnNvciArPSBuZXh0UG9zO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuICBnZXQgbWVtb3JpemVkKCkge1xuICAgIHJldHVybiB0aGlzLm1lbW9yaXplZEN1cnNvcjtcbiAgfVxuICBnZXQgY3VyKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnNvcjtcbiAgfVxufVxuIl19